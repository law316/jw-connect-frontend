<!DOCTYPE html>
<html>
<head>
<title>Profile Hub - Upgraded</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/5/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-blue-grey.css">
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
html,body,h1,h2,h3,h4,h5 {font-family:"Open Sans",sans-serif}

/* Background */
body {
    background: #e6e6e6;
}

/* Theme Colors */
.w3-theme-d2, .w3-theme-d4, .w3-theme {
    background: #003366 !important;
}

.w3-theme-l1, .w3-theme-l2, .w3-theme-l3 {
    background: #0055aa !important;
}

/* Buttons */
button, .w3-button {
    transition: 0.3s;
}

button:hover, .w3-button:hover {
    background: #ff8800 !important;
    box-shadow: 0 0 12px #ff8800;
    color: white !important;
}

/* Card Styling */
.w3-card, .w3-card-4 {
    border-radius: 18px !important;
    box-shadow: 0 6px 18px rgba(0,0,0,0.18) !important;
    background: #ffffff;
}

/* Profile Image Glow */
.profile-img {
    border: 4px solid white;
    box-shadow: 0px 0px 18px #ff8800;
}

/* Find Person Button */
.find-btn {
    background: #003366 !important;
    border-radius: 12px;
}

.find-btn:hover {
    background: #ff8800 !important;
}
</style>
</head>

<body class="w3-theme-l5">

<!-- Navbar -->
<div class="w3-top">
 <div class="w3-bar w3-theme-d2 w3-left-align w3-large">
  <a class="w3-bar-item w3-button w3-theme-d4"><i class="fa fa-home w3-margin-right"></i>Profile Hub</a>

  <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large"><i class="fa fa-globe"></i></a>
  <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large"><i class="fa fa-user"></i></a>
  <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large"><i class="fa fa-envelope"></i></a>

  <a href="#" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large">
    <img id="navProfileImg" src="default.png" class="w3-circle profile-img" style="height:30px;width:30px;">
  </a>
 </div>
</div>

<!-- Page Container -->
<div class="w3-container w3-content" style="max-width:1400px;margin-top:80px">
<div class="w3-row">

<!-- LEFT COLUMN -->
<div class="w3-col m3">
  <div class="w3-card w3-white w3-round">
    <div class="w3-container w3-center">
      <h4>My Profile</h4>
      <img id="profileImage" src="default.png" class="w3-circle profile-img" style="height:106px;width:106px;">
      <hr>
      <p><i class="fa fa-user w3-margin-right"></i><span id="profileName">Loading...</span></p>
      <p><i class="fa fa-home w3-margin-right"></i><span id="profileLocation">Loading...</span></p>
      <p><i class="fa fa-envelope w3-margin-right"></i><span id="profileEmail">Loading...</span></p>
    </div>
  </div>
  <br>

  <div class="w3-card w3-white w3-round w3-padding">
    <p><strong>Interests</strong></p>
    <div id="interestsContainer"></div>
  </div>
  <br>
</div>

<!-- MIDDLE COLUMN -->
<div class="w3-col m7">

  <div class="w3-card w3-white w3-round w3-padding">
    <h6 class="w3-opacity">Share something</h6>
    <p contenteditable="true" class="w3-border w3-padding">Feeling blessed today üôè</p>
    <button class="w3-button w3-theme"><i class="fa fa-pencil"></i> Post</button>
  </div>
  <br>

  <div class="w3-card w3-white w3-round">
    <div class="w3-container">
      <h4>Watch Christian Videos</h4>
      <div class="w3-row-padding">

        <div class="w3-half">
          <img src="https://i.imgur.com/A7kCqfk.jpeg" style="width:100%" class="w3-round w3-margin-bottom">
          <p><b>JW Broadcasting</b></p>
        </div>

        <div class="w3-half">
          <img src="https://i.imgur.com/EEG4O7g.png" style="width:100%" class="w3-round w3-margin-bottom">
          <p><b>Bible Teachings</b></p>
        </div>

      </div>
    </div>
  </div>
  <br>

  <div class="w3-card w3-white w3-round w3-padding">
    <h4>Kingdom Songs</h4>
    <audio controls style="width:100%">
      <source src="https://www.jw.org/download/?output=audio&pub=ks&track=001">
    </audio>
  </div>
  <br>

  <div class="w3-card w3-white w3-round w3-padding w3-center" onclick="document.getElementById('vid').click()" style="cursor:pointer;border:2px dashed #003366;">
    <h4>üì§ Upload a Video</h4>
    <input type="file" id="vid" hidden>
  </div>

</div>

<!-- RIGHT COLUMN -->
<div class="w3-col m2">
  <div class="w3-card w3-white w3-round w3-center w3-padding">
    <p>Christian Quote</p>
    <img src="https://i.imgur.com/WxNkK1p.png" style="width:80%" class="w3-round">
    <p><b>God is Love</b></p>
  </div>
  <br>

  <div class="w3-card w3-white w3-round w3-center w3-padding">
    <p>Connect</p>
    <a href="chat_list.html" class="w3-button w3-block find-btn">Find Someone</a>
    <button class="w3-button w3-block w3-theme-l1">Conversation</button>
  </div>
</div>

</div>
</div>

<br>

<footer class="w3-container w3-theme-d3 w3-center w3-padding">
  <h5>Powered by Faith & W3.CSS</h5>
</footer>

<script>
const username = localStorage.getItem("username");

async function loadProfile() {
    const res = await fetch(`https://jwconnect.fly.dev/api/profile/${username}`);
    const data = await res.json();

    document.getElementById("profileImage").src = data.image || "default.png";
    document.getElementById("navProfileImg").src = data.image || "default.png";

    document.getElementById("profileName").innerText = data.userName;
    document.getElementById("profileLocation").innerText = data.location;
    document.getElementById("profileEmail").innerText = data.email;

    // Fill interests
    const container = document.getElementById("interestsContainer");
    container.innerHTML = "";
    if (data.interest) {
        data.interinterest = data.interest.split(",");
        data.interinterest.forEach(tag => {
            container.innerHTML += `<span class="w3-tag w3-theme w3-margin-right">${tag.trim()}</span>`;
        });
    }
}

loadProfile();
</script>

</body>
</html>
